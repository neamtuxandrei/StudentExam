
  <p-dialog [(visible)] = "addControl" [modal]  ="true">
    <ng-template pTemplate = "header">
        <h3 class="dialog-header">Add Examination Ticket</h3>
    </ng-template>

    <ng-template pTemplate="body">
        <form [formGroup] = "addTicketForm">
        <div class="card">
            <div class="field">
                <label for="ticketno">Ticket No</label>
                <input id="ticketno" [formControl]="addTicketForm.controls['ticketNo']"  type ="number"  class="form-control text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
            </div>
        </div>
        <div class="card">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="question1">Question 1</label>
                    <textarea id="question1" [formControl]="addTicketForm.controls['question1']"  placeholder = "Write the first question" type="text" rows="4" class="form-control"  class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
                </div>
                <div class="field col">
                    <label for="answer1">Answer 1</label>
                    <textarea id="answer1" [formControl]="addTicketForm.controls['answer1']" placeholder = "Write the answer for the first question" type="text" rows="4" class="form-control"  class="text-base text-color  surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="question2">Question 2</label>
                    <textarea id="question2" [formControl]="addTicketForm.controls['question2']" placeholder = "Write the second question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
                </div>
                <div class="field col">
                    <label for="answer2">Answer 2</label>
                    <textarea id="answer2" [formControl]="addTicketForm.controls['answer2']" placeholder = "Write the answer for the second question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="question3">Question 3</label>
                    <textarea id="question3" [formControl]="addTicketForm.controls['question3']" placeholder = "Write the third question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
                </div>
                <div class="field col">
                    <label for="answer3">Answer 3</label>
                    <textarea id="answer3" [formControl]="addTicketForm.controls['answer3']" placeholder = "Write the answer for the third question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
                </div>


            </div>
        </div>
    </form>

    </ng-template>
    <ng-template pTemplate ="footer">
        <button pButton pRipple label="Cancel" class="p-button-danger" (click)="closeAddDialog()"></button>
        <button pButton pRipple label="Save" class="p-button-success" (click) = "onAddTicketClick()"></button>
    </ng-template>
  </p-dialog>


  <p-dialog [(visible)] = "editControl" [modal]  ="true">
    <ng-template pTemplate = "header">
        <h3 class="dialog-header">Edit Examination Ticket</h3>
    </ng-template>

    <ng-template pTemplate="body">
        <form [formGroup] = "editTicketForm">
        <div class="card">
            <div class="field">
                <label for="ticketno">Ticket No</label>
                <input id="ticketno" [formControl]="editTicketForm.controls['ticketNo']" readonly type ="number" class="form-control"   class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
            </div>
        </div>
        <div class="card">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="question1">Question 1</label>
                    <textarea id="question1" [formControl] = "editTicketForm.controls['question1']"  type="text" rows="4" class="form-control"   class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">Question 1</textarea>
                </div>
                <div class="field col">
                    <label for="answer1">Answer 1</label>
                    <textarea id="answer1"  [formControl] = "editTicketForm.controls['answer1']"  type="text" rows="4"  class="form-control"  class="text-base text-color  surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">Answer 1</textarea>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="question2">Question 2</label>
                    <textarea id="question2" [formControl]="editTicketForm.controls['question2']" placeholder = "Write the second question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">Question 2</textarea>
                </div>
                <div class="field col">
                    <label for="answer2">Answer 2</label>
                    <textarea id="answer2" [formControl]="editTicketForm.controls['answer2']" placeholder = "write the answer for the second question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">Answer 2</textarea>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="question3">Question 3</label>
                    <textarea id="question3" [formControl]="editTicketForm.controls['question3']" placeholder = "Write the third question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">Question 3</textarea>
                </div>
                <div class="field col">
                    <label for="answer3">Answer 3</label>
                    <textarea id="answer3" [formControl]="editTicketForm.controls['answer3']" placeholder = "Write the answer for the third question" type="text" rows="4" class="form-control" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">Answer 3</textarea>
                </div>
            </div>
        </div>
    </form>


    </ng-template>
    <ng-template pTemplate ="footer">
        <button pButton pRipple label="Cancel" class="p-button-danger" (click)="closeEditDialog()"></button>
        <button pButton pRipple label="Save" class="p-button-success" (click)="updateTicket()"></button>
    </ng-template>
  </p-dialog>
<p-dialog header="Import tickets from another exam session" [(visible)]="isImportTicketsDialogVisible" [modal]="true"
  [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
  <div class="session-selection">
    <div class="button-dropdown-container">
      <div class="">
        <p-dropdown [options]="examinationSessions" [(ngModel)]="selectedSession" optionLabel="name" class="ticket-dropdown"></p-dropdown>
        <label class="ticket-label" style="margin-left: 10px;">TicketNo:</label>
        <span class="ticket-count"><strong>{{selectedSession?.numberOfTickets}}</strong></span>
      </div>
    </div>
    <div class="col-md-5">
      <button pButton type="button" label="Cancel" (click)="hideImportStudentDialog()" class="p-button-danger mr-2"></button>
      <button pButton type="button" label="Import" (click)="importTickets()"
      [disabled]="selectedSession?.numberOfTickets === undefined || selectedSession?.numberOfTickets === 0"
       class="p-button-success p-button-help"></button>
    </div>
  </div>
</p-dialog>

<div class="card flex justify-content-center">
  <p-confirmDialog #cd [style]="{width: '50vw'}">
      <ng-template pTemplate="header">
          <h3>Remove ticket</h3>
      </ng-template>
      <ng-template pTemplate="footer">
          <button type="button" class="p-button-danger" pButton icon="pi pi-times" label="Cancel" (click)="cd.reject()"></button>
          <button (click)="onRemoveClick(ticketToDelete)" type="button" class="p-button-success" pButton icon="pi pi-check" label="Remove" (click)="cd.accept()"></button>
      </ng-template>
  </p-confirmDialog>
</div>

<p-dialog [(visible)]="isTicketDialogVisible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
    <div class="col-md-5">
        <form [formGroup]="ticketForm">
            <div class="input-group-container">
                <div class="input-group">
                    <label>Ticket No</label>
                    <input pInputText formControlName="ticketNo"
                        class="form-control">
                </div>
                <div class="input-group">
                    <label>Is Active?</label>
                    <p-dropdown formControlName="isActive" [options]="ticketActiveDropdown" optionLabel="state"></p-dropdown>
                </div>
            </div>
                <div class="form-group">
                    <label>Question 1</label>
                    <input pInputText formControlName="question1" class="form-control large-input">
                </div>
                <div class="form-group">
                    <label>Answer 1</label>
                    <textarea rows="5" cols="30" pInputTextarea formControlName="answer1"></textarea>
                </div>
                <div class="form-group">
                    <label>Question 2</label>
                    <input pInputText formControlName="question2" class="form-control large-input">
                </div>
                <div class="form-group">
                    <label>Answer 2</label>
                    <textarea rows="5" cols="30" pInputTextarea formControlName="answer2"></textarea>
                </div>
                <div class="form-group">
                    <label>Question 3</label>
                    <input pInputText formControlName="question3" class="form-control large-input">
                </div>
                <div class="form-group">
                    <label>Answer 3</label>
                    <textarea rows="5" cols="30" pInputTextarea formControlName="answer3"></textarea>
                </div>
                <div class="form-group">
                    <label>Answer 3</label>
                    <textarea rows="5" cols="30" pInputTextarea [formControl]="ticketForm.controls['answer3']"></textarea>
                </div>

        </form>
    </div>
</p-dialog>

<div class="card">
    <div class="flex justify-content-end flex-wrap gap-3 mb-4">
        <button pButton label="Add Ticket" class="p-button-success" icon="pi pi-plus" iconPos="left" (click)="displayAddDialog()"></button>
        <button pButton label="Import" class="p-button-help" icon="pi pi-file-import" iconPos="right" (click)="onImportClick()"></button>
    </div>
    <p-table [value]="tickets" >
        <ng-template pTemplate="header">
            <tr>
                <th>Ticket No</th>
                <th>Is Active</th>
                <th>Question 1</th>
                <th>Question 2</th>
                <th>Question 3</th>
                <th>Answer 1</th>
                <th>Answer 2</th>
                <th>Answer 3</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-ticket>
            <tr class="clickable-row" (click)="onEditTicketClick(ticket)">
                <td>{{ ticket.ticketNo }}</td>
                <td *ngIf="checkStatus(ticket)">Yes</td>
                <td *ngIf="!checkStatus(ticket)">No</td>
                <td><div class="max-lines-2">{{ ticket.question1 }}</div></td>
                <td><div class="max-lines-2">{{ ticket.question2 }}</div></td>
                <td><div class="max-lines-2">{{ ticket.question3 }}</div></td>
                <td><div class="max-lines-2">{{ ticket.answer1 }}</div></td>
                <td><div class="max-lines-2">{{ ticket.answer2 }}</div></td>
                <td><div class="max-lines-2">{{ ticket.answer3 }}</div></td>
                <td>
                    <p-button pRipple type="button" icon="pi pi-times" class="p-button-danger" pTooltip="Remove"
                        tooltipPosition="bottom" placeholder="Bottom" (onClick)="confirmRemoveDialog($event, ticket.id)"
                        styleClass="p-button-rounded p-button-danger p-button-text"></p-button>

                </td>
            </tr>
        </ng-template>
    </p-table>
</div>


